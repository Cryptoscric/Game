<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>Wonder Boxer</title>

<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: sans-serif;
    color: #fff;
  }

  #game-container {
    position: relative;
    width: 800px;
    height: 400px;
    overflow: hidden;
    border: 3px solid #fff;
    background: linear-gradient(#87ceeb 0%, #87ceeb 60%, #3b2f1b 60%, #3b2f1b 100%);
  }

  #level {
    position: relative;
    width: 1600px;
    height: 100%;
  }

  .ground {
    position: absolute;
    left: 0;
    bottom: 0;
    width: 1600px;
    height: 80px;
    background: #4b3a22;
  }

  .platform {
    position: absolute;
    width: 120px;
    height: 20px;
    background: #6b4b2a;
    border-radius: 4px;
  }

  #player {
    position: absolute;
    width: 48px;
    height: 72px;
    left: 100px;
    bottom: 80px;

    /* Sostituisci con la tua immagine */
    background: #ff4b7a;
    border: 2px solid #fff;
    border-radius: 8px;

    /* Esempio sprite:
    background-image: url("boxer.png");
    background-size: cover;
    background-position: center;
    border: none;
    border-radius: 0;
    */
  }

  .enemy {
    position: absolute;
    width: 40px;
    height: 40px;
    background: #000;
    border-radius: 50%;
    bottom: 80px;
  }

  .coin {
    position: absolute;
    width: 24px;
    height: 24px;
    background: gold;
    border-radius: 50%;
    border: 2px solid #fff;
  }

  #hud {
    position: absolute;
    top: 8px;
    left: 8px;
    font-size: 14px;
    text-shadow: 1px 1px 2px #000;
  }

  #lives {
    position: absolute;
    top: 8px;
    right: 8px;
    font-size: 14px;
    text-shadow: 1px 1px 2px #000;
  }
</style>
</head>

<body>
<div id="game-container">
  <div id="hud">Monete raccolte: 0</div>
  <div id="lives">Vite: ❤️❤️❤️</div>

  <div id="level">

    <div class="ground"></div>

    <div id="player"></div>

    <!-- Piattaforme -->
    <div class="platform" style="left: 260px; bottom: 160px;"></div>
    <div class="platform" style="left: 430px; bottom: 220px;"></div>
    <div class="platform" style="left: 600px; bottom: 160px;"></div>

    <!-- Nemico -->
    <div class="enemy" id="enemy1" style="left: 500px;"></div>

    <!-- Monete -->
    <div class="coin" style="left: 300px; bottom: 180px;"></div>
    <div class="coin" style="left: 460px; bottom: 240px;"></div>
    <div class="coin" style="left: 620px; bottom: 180px;"></div>

  </div>
</div>

<script>
  const container = document.getElementById("game-container");
  const level = document.getElementById("level");
  const player = document.getElementById("player");
  const enemy1 = document.getElementById("enemy1");
  const platforms = Array.from(document.getElementsByClassName("platform"));
  const coins = Array.from(document.getElementsByClassName("coin"));

  const gravity = 0.6;
  const moveSpeed = 3.2;
  const jumpStrength = 11;

  let playerX = 100;
  let playerY = 80;
  let velX = 0;
  let velY = 0;
  let onGround = false;

  let score = 0;
  let lives = 3;

  let keys = { left: false, right: false, jump: false };

  // Nemico
  let enemyX = 500;
  let enemyDir = -1;
  const enemySpeed = 1.5;
  const enemyMinX = 450;
  const enemyMaxX = 650;

  function rectsOverlap(a, b) {
    return !(a.right < b.left || a.left > b.right || a.bottom < b.top || a.top > b.bottom);
  }

  function getRect(el) {
    const r = el.getBoundingClientRect();
    const c = container.getBoundingClientRect();
    return {
      left: r.left - c.left + container.scrollLeft,
      right: r.right - c.left + container.scrollLeft,
      top: r.top - c.top,
      bottom: r.bottom - c.top,
      width: r.width,
      height: r.height
    };
  }

  function updatePlayer() {
    velX = 0;
    if (keys.left) velX = -moveSpeed;
    if (keys.right) velX = moveSpeed;

    if (keys.jump && onGround) {
      velY = jumpStrength;
      onGround = false;
    }

    velY -= gravity;

    playerX += velX;
    playerY += velY;

    if (playerX < 0) playerX = 0;
    if (playerX > level.clientWidth - player.clientWidth)
      playerX = level.clientWidth - player.clientWidth;

    const groundY = 80;
    if (playerY <= groundY) {
      playerY = groundY;
      velY = 0;
      onGround = true;
    } else onGround = false;

    const playerRect = {
      left: playerX,
      right: playerX + player.clientWidth,
      top: container.clientHeight - (playerY + player.clientHeight),
      bottom: container.clientHeight - playerY
    };

    platforms.forEach(p => {
      const pr = getRect(p);
      const platRect = { left: pr.left, right: pr.right, top: pr.top, bottom: pr.bottom };

      if (rectsOverlap(playerRect, platRect) && velY < 0) {
        const playerBottomPrev = playerRect.bottom - velY;
        if (playerBottomPrev <= platRect.top + 5) {
          playerY = container.clientHeight - platRect.top - player.clientHeight;
          velY = 0;
          onGround = true;
        }
      }
    });

    player.style.left = playerX + "px";
    player.style.bottom = playerY + "px";
  }

  function updateEnemy() {
    enemyX += enemyDir * enemySpeed;
    if (enemyX < enemyMinX) { enemyX = enemyMinX; enemyDir = 1; }
    else if (enemyX > enemyMaxX) { enemyX = enemyMaxX; enemyDir = -1; }

    enemy1.style.left = enemyX + "px";

    const pRect = getRect(player);
    const eRect = getRect(enemy1);

    if (rectsOverlap(pRect, eRect)) loseLife();
  }

  function updateCoins() {
    const pRect = getRect(player);
    coins.forEach((coin, index) => {
      const cRect = getRect(coin);
      if (rectsOverlap(pRect, cRect)) {
        coin.remove();
        coins.splice(index, 1);
        score++;
        document.getElementById("hud").textContent = `Monete raccolte: ${score}`;
      }
    });
  }

  function loseLife() {
    lives--;
    document.getElementById("lives").textContent = `Vite: ${"❤️".repeat(lives)}`;

    if (lives <= 0) {
      alert("Game Over!");
      lives = 3;
      score = 0;
      document.getElementById("lives").textContent = "Vite: ❤️❤️❤️";
      document.getElementById("hud").textContent = "Monete raccolte: 0";
    }

   
